<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Minecraftç¤¾åŒº | æ‚¨çš„GitHub Gistç‰ˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --mc-green: #3b8526;
            --mc-dark: #1a2c1a;
            --github-black: #24292e;
            --github-green: #2ea043;
        }
        
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',sans-serif; }
        body { 
            background: linear-gradient(135deg, #0f1a0f 0%, #1a2c1a 100%);
            color:white; 
            min-height:100vh;
            padding:20px;
        }
        
        .container { max-width:1000px; margin:0 auto; }
        
        /* å¤´éƒ¨ */
        .header {
            background: linear-gradient(135deg, var(--github-black), #2d333b);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            border: 3px solid var(--mc-green);
        }
        
        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #3b8526, var(--github-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .gist-info {
            background: rgba(36,41,46,0.3);
            border: 1px solid #444;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            font-family: monospace;
        }
        
        /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status {
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }
        
        .status.success {
            background: rgba(46,160,67,0.2);
            border: 1px solid var(--github-green);
        }
        
        .status.error {
            background: rgba(248,81,73,0.2);
            border: 1px solid #f85149;
        }
        
        .status.warning {
            background: rgba(201,167,0,0.2);
            border: 1px solid #d29922;
        }
        
        /* å¿«é€Ÿæ“ä½œæŒ‰é’® */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .action-btn {
            background: var(--github-black);
            border: 1px solid #444;
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
            text-align: center;
        }
        
        .action-btn:hover {
            background: #2d333b;
            border-color: #666;
            transform: translateY(-2px);
        }
        
        /* å†…å®¹åŒº */
        .content-area {
            background: rgba(26,44,26,0.8);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid var(--mc-green);
        }
        
        .form-group { margin-bottom: 20px; }
        .form-control {
            width: 100%;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
        }
        
        textarea.form-control { min-height: 100px; resize: vertical; }
        
        .btn {
            padding: 15px 30px;
            background: var(--mc-green);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: 0.3s;
            width: 100%;
        }
        
        .btn:hover {
            background: #5ba34e;
            transform: translateY(-2px);
        }
        
        .btn-github {
            background: var(--github-black);
            border: 1px solid #444;
        }
        
        .btn-github:hover {
            background: #2d333b;
        }
        
        /* æ•°æ®æ˜¾ç¤º */
        .data-display {
            margin: 30px 0;
        }
        
        .data-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #888;
        }
        
        .loading i {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--mc-green);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1><i class="fab fa-github"></i> Minecraft GitHubç¤¾åŒº</h1>
            <p>ä½¿ç”¨æ‚¨çš„GitHub Gistå­˜å‚¨æ•°æ®</p>
            
            <div class="gist-info">
                <div><strong>Gist ID:</strong> bc0ab1b9249595c0205d98ff95a3181b</div>
                <div><strong>æ•°æ®URL:</strong> https://gist.githubusercontent.com/bc0ab1b9249595c0205d98ff95a3181b/raw</div>
            </div>
            
            <div class="status" id="connectionStatus">
                <i class="fas fa-circle"></i>
                <span>å‡†å¤‡è¿æ¥GitHub...</span>
            </div>
        </div>
        
        <!-- å¿«é€Ÿæ“ä½œ -->
        <div class="quick-actions">
            <div class="action-btn" onclick="loadFromGist()">
                <i class="fas fa-download"></i>
                <div>ä»GiståŠ è½½æ•°æ®</div>
            </div>
            
            <div class="action-btn" onclick="viewGistPage()">
                <i class="fas fa-external-link-alt"></i>
                <div>æŸ¥çœ‹Gisté¡µé¢</div>
            </div>
            
            <div class="action-btn" onclick="showPostForm()">
                <i class="fas fa-plus"></i>
                <div>å‘å¸ƒæ–°å†…å®¹</div>
            </div>
            
            <div class="action-btn" onclick="showGitHubConfig()">
                <i class="fas fa-cog"></i>
                <div>GitHubé…ç½®</div>
            </div>
        </div>
        
        <!-- å‘å¸ƒè¡¨å• -->
        <div class="content-area" id="postForm" style="display:none;">
            <h2 style="text-align:center;margin-bottom:25px;">
                <i class="fas fa-plus-circle"></i> å‘å¸ƒæ–°å†…å®¹
            </h2>
            
            <div class="form-group">
                <select id="contentType" class="form-control" onchange="toggleForm()">
                    <option value="post">å‘å¸ƒå¸–å­</option>
                    <option value="server">æ·»åŠ æœåŠ¡å™¨</option>
                </select>
            </div>
            
            <div id="postFormContent">
                <div class="form-group">
                    <input type="text" id="postTitle" class="form-control" placeholder="å¸–å­æ ‡é¢˜" value="æ¬¢è¿æ¥åˆ°GitHubç¤¾åŒºï¼">
                </div>
                <div class="form-group">
                    <textarea id="postContent" class="form-control" placeholder="å¸–å­å†…å®¹...">è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨GitHub Gistå­˜å‚¨æ•°æ®çš„Minecraftç¤¾åŒºï¼</textarea>
                </div>
            </div>
            
            <div id="serverFormContent" style="display:none;">
                <div class="form-group">
                    <input type="text" id="serverName" class="form-control" placeholder="æœåŠ¡å™¨åç§°" value="GitHubç¤¾åŒºæœåŠ¡å™¨">
                </div>
                <div class="form-group">
                    <input type="text" id="serverIP" class="form-control" placeholder="IPåœ°å€:ç«¯å£" value="play.github-mc.com:25565">
                </div>
                <div class="form-group">
                    <textarea id="serverDesc" class="form-control" placeholder="æœåŠ¡å™¨æè¿°...">æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„GitHubç¤¾åŒºæœåŠ¡å™¨ï¼</textarea>
                </div>
            </div>
            
            <div class="form-group">
                <label style="display:block;margin-bottom:10px;color:#ccc;">æ¸¸æˆç‰ˆæœ¬ï¼š</label>
                <div style="display:flex;gap:15px;">
                    <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                        <input type="radio" name="platform" value="java" checked>
                        <span style="background:#e74c3c20;color:#e74c3c;padding:5px 10px;border-radius:15px;">Javaç‰ˆ</span>
                    </label>
                    <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                        <input type="radio" name="platform" value="bedrock">
                        <span style="background:#3498db20;color:#3498db;padding:5px 10px;border-radius:15px;">åŸºå²©ç‰ˆ</span>
                    </label>
                </div>
            </div>
            
            <button class="btn" onclick="saveContent()">
                <i class="fas fa-save"></i> ä¿å­˜å†…å®¹
            </button>
            
            <button class="btn btn-github" onclick="saveToGist()" style="margin-top:10px;">
                <i class="fab fa-github"></i> ä¿å­˜åˆ°GitHub Gist
            </button>
        </div>
        
        <!-- æ•°æ®æ˜¾ç¤ºåŒº -->
        <div class="data-display">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
                <h2><i class="fas fa-comments"></i> å¸–å­åˆ—è¡¨</h2>
                <button class="btn" onclick="loadFromGist()" style="width:auto;padding:10px 20px;">
                    <i class="fas fa-sync-alt"></i> åˆ·æ–°
                </button>
            </div>
            
            <div id="postsDisplay" class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>ç‚¹å‡»"ä»GiståŠ è½½æ•°æ®"å¼€å§‹</p>
            </div>
            
            <h2 style="margin-top:40px;margin-bottom:20px;"><i class="fas fa-server"></i> æœåŠ¡å™¨åˆ—è¡¨</h2>
            <div id="serversDisplay" class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>æ•°æ®åŠ è½½ä¸­...</p>
            </div>
        </div>
        
        <!-- GitHubé…ç½® -->
        <div class="content-area" id="githubConfig" style="display:none;">
            <h2 style="text-align:center;margin-bottom:25px;">
                <i class="fas fa-cog"></i> GitHubé…ç½®
            </h2>
            
            <div class="form-group">
                <label style="display:block;margin-bottom:5px;color:#ccc;">GitHub Token:</label>
                <input type="password" id="githubToken" class="form-control" placeholder="è¾“å…¥GitHub Personal Access Token">
                <small style="color:#888;margin-top:5px;">
                    éœ€è¦å…·æœ‰gistæƒé™çš„tokenæ‰èƒ½è‡ªåŠ¨ä¿å­˜
                </small>
            </div>
            
            <div class="form-group">
                <label style="display:block;margin-bottom:5px;color:#ccc;">Gist ID:</label>
                <input type="text" id="gistId" class="form-control" value="bc0ab1b9249595c0205d98ff95a3181b" readonly>
            </div>
            
            <button class="btn" onclick="saveGitHubConfig()">
                <i class="fas fa-check"></i> ä¿å­˜é…ç½®
            </button>
            
            <div style="margin-top:25px;padding:15px;background:rgba(201,167,0,0.1);border-radius:8px;border:1px solid #d29922;">
                <h3><i class="fas fa-info-circle"></i> å¦‚ä½•è·å–GitHub Token:</h3>
                <ol style="margin-left:20px;color:#ccc;">
                    <li>è®¿é—® https://github.com/settings/tokens</li>
                    <li>ç‚¹å‡»"Generate new token"</li>
                    <li>é€‰æ‹©"gist"æƒé™</li>
                    <li>å¤åˆ¶ç”Ÿæˆçš„token</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // ============ é…ç½® ============
        const GIST_ID = 'bc0ab1b9249595c0205d98ff95a3181b';
        const GIST_URL = `https://gist.githubusercontent.com/${GIST_ID}/raw`;
        const GITHUB_API = 'https://api.github.com';
        
        // åº”ç”¨æ•°æ®
        let appData = {
            posts: [],
            servers: [],
            last_updated: new Date().toISOString(),
            version: '1.0'
        };
        
        let currentUser = 'GitHubç©å®¶_' + Math.floor(Math.random() * 1000);
        let githubToken = localStorage.getItem('github_token') || '';
        
        // ============ åˆå§‹åŒ– ============
        function initApp() {
            // è®¾ç½®Gist ID
            document.getElementById('gistId').value = GIST_ID;
            
            // å¦‚æœæœ‰tokenï¼Œè®¾ç½®tokenè¾“å…¥æ¡†
            if (githubToken) {
                document.getElementById('githubToken').value = githubToken;
            }
            
            // æ›´æ–°çŠ¶æ€
            updateConnectionStatus();
            
            // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
            const statusEl = document.getElementById('connectionStatus');
            statusEl.innerHTML += `<div style="margin-top:10px;color:#ccc;">å½“å‰ç”¨æˆ·: ${currentUser}</div>`;
            
            // å°è¯•åŠ è½½æœ¬åœ°æ•°æ®
            loadLocalData();
        }
        
        // ============ Gistæ“ä½œ ============
        async function loadFromGist() {
            const statusEl = document.getElementById('connectionStatus');
            const postsDisplay = document.getElementById('postsDisplay');
            const serversDisplay = document.getElementById('serversDisplay');
            
            statusEl.className = 'status warning';
            statusEl.innerHTML = '<i class="fas fa-sync fa-spin"></i><span>æ­£åœ¨ä»GitHub GiståŠ è½½æ•°æ®...</span>';
            
            postsDisplay.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i><p>åŠ è½½ä¸­...</p></div>';
            serversDisplay.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i><p>åŠ è½½ä¸­...</p></div>';
            
            try {
                console.log('æ­£åœ¨ä»GiståŠ è½½:', GIST_URL);
                
                // æ·»åŠ éšæœºå‚æ•°é¿å…ç¼“å­˜
                const response = await fetch(`${GIST_URL}?t=${Date.now()}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                // æ›´æ–°åº”ç”¨æ•°æ®
                appData = {
                    ...data,
                    posts: data.posts || [],
                    servers: data.servers || []
                };
                
                // ä¿å­˜åˆ°æœ¬åœ°
                saveLocalData();
                
                // æ›´æ–°æ˜¾ç¤º
                displayPosts();
                displayServers();
                
                statusEl.className = 'status success';
                statusEl.innerHTML = `<i class="fas fa-check-circle"></i><span>æˆåŠŸåŠ è½½ ${appData.posts.length} æ¡å¸–å­å’Œ ${appData.servers.length} ä¸ªæœåŠ¡å™¨</span>`;
                
                alert(`âœ… ä»GitHub GiståŠ è½½æˆåŠŸï¼\n\nå¸–å­: ${appData.posts.length} æ¡\næœåŠ¡å™¨: ${appData.servers.length} ä¸ª`);
                
            } catch (error) {
                console.error('ä»GiståŠ è½½å¤±è´¥:', error);
                
                statusEl.className = 'status error';
                statusEl.innerHTML = `<i class="fas fa-times-circle"></i><span>åŠ è½½å¤±è´¥: ${error.message}</span>`;
                
                // ä½¿ç”¨æœ¬åœ°æ•°æ®
                postsDisplay.innerHTML = '<div class="loading"><i class="fas fa-exclamation-triangle"></i><p>ä½¿ç”¨æœ¬åœ°æ•°æ®</p></div>';
                loadLocalData();
                displayPosts();
                displayServers();
                
                alert(`âš ï¸ ä»GitHubåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®\n\né”™è¯¯: ${error.message}`);
            }
        }
        
        async function saveToGist() {
            if (!githubToken) {
                alert('éœ€è¦GitHub Tokenæ‰èƒ½ä¿å­˜åˆ°Gist\n\nè¯·å…ˆé…ç½®GitHub Token');
                showGitHubConfig();
                return;
            }
            
            const statusEl = document.getElementById('connectionStatus');
            statusEl.className = 'status warning';
            statusEl.innerHTML = '<i class="fas fa-sync fa-spin"></i><span>æ­£åœ¨ä¿å­˜åˆ°GitHub Gist...</span>';
            
            try {
                // æ›´æ–°æ•°æ®
                appData.last_updated = new Date().toISOString();
                
                const response = await fetch(`${GITHUB_API}/gists/${GIST_ID}`, {
                    method: 'PATCH',
                    headers: {
                        'Authorization': `token ${githubToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        description: 'Minecraftç¤¾åŒºæ•°æ®åº“ - æœ€åæ›´æ–°: ' + new Date().toLocaleString(),
                        files: {
                            'minecraft-db.json': {
                                content: JSON.stringify(appData, null, 2)
                            }
                        }
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || `HTTP ${response.status}`);
                }
                
                statusEl.className = 'status success';
                statusEl.innerHTML = '<i class="fas fa-check-circle"></i><span>æˆåŠŸä¿å­˜åˆ°GitHub Gistï¼</span>';
                
                alert(`âœ… æ•°æ®å·²æˆåŠŸä¿å­˜åˆ°æ‚¨çš„GitHub Gistï¼\n\næ‰€æœ‰äººéƒ½èƒ½çœ‹åˆ°æ›´æ–°åçš„æ•°æ®ã€‚\n\nGiståœ°å€: https://gist.github.com/${GIST_ID}`);
                
            } catch (error) {
                console.error('ä¿å­˜åˆ°Gistå¤±è´¥:', error);
                
                statusEl.className = 'status error';
                statusEl.innerHTML = `<i class="fas fa-times-circle"></i><span>ä¿å­˜å¤±è´¥: ${error.message}</span>`;
                
                alert(`âŒ ä¿å­˜å¤±è´¥:\n${error.message}\n\næ•°æ®å·²ä¿å­˜åœ¨æœ¬åœ°ã€‚`);
            }
        }
        
        // ============ æœ¬åœ°æ•°æ®æ“ä½œ ============
        function loadLocalData() {
            const saved = localStorage.getItem('mc_local_data');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    appData.posts = data.posts || [];
                    appData.servers = data.servers || [];
                } catch (e) {
                    console.error('è§£ææœ¬åœ°æ•°æ®å¤±è´¥:', e);
                }
            }
        }
        
        function saveLocalData() {
            localStorage.setItem('mc_local_data', JSON.stringify(appData));
            console.log('æœ¬åœ°æ•°æ®å·²ä¿å­˜');
        }
        
        // ============ å†…å®¹æ“ä½œ ============
        function toggleForm() {
            const type = document.getElementById('contentType').value;
            document.getElementById('postFormContent').style.display = type === 'post' ? 'block' : 'none';
            document.getElementById('serverFormContent').style.display = type === 'server' ? 'block' : 'none';
        }
        
        function saveContent() {
            const type = document.getElementById('contentType').value;
            const platform = document.querySelector('input[name="platform"]:checked').value;
            
            if (type === 'post') {
                const title = document.getElementById('postTitle').value.trim();
                const content = document.getElementById('postContent').value.trim();
                
                if (!title || !content) {
                    alert('è¯·å¡«å†™æ ‡é¢˜å’Œå†…å®¹');
                    return;
                }
                
                const newPost = {
                    id: Date.now(),
                    title: title,
                    content: content,
                    platform: platform,
                    author: currentUser,
                    created_at: new Date().toISOString()
                };
                
                appData.posts.unshift(newPost);
                saveLocalData();
                
                document.getElementById('postTitle').value = '';
                document.getElementById('postContent').value = '';
                
                displayPosts();
                
                alert('âœ… å¸–å­å·²ä¿å­˜åˆ°æœ¬åœ°ï¼\n\nç‚¹å‡»"ä¿å­˜åˆ°GitHub Gist"ä¸å…¶ä»–äººåˆ†äº«ã€‚');
                
            } else {
                const name = document.getElementById('serverName').value.trim();
                const ip = document.getElementById('serverIP').value.trim();
                const description = document.getElementById('serverDesc').value.trim();
                
                if (!name || !ip || !description) {
                    alert('è¯·å¡«å†™æ‰€æœ‰å­—æ®µ');
                    return;
                }
                
                const newServer = {
                    id: Date.now(),
                    name: name,
                    ip: ip,
                    description: description,
                    platform: platform,
                    author: currentUser,
                    created_at: new Date().toISOString()
                };
                
                appData.servers.unshift(newServer);
                saveLocalData();
                
                document.getElementById('serverName').value = '';
                document.getElementById('serverIP').value = '';
                document.getElementById('serverDesc').value = '';
                
                displayServers();
                
                alert('âœ… æœåŠ¡å™¨å·²ä¿å­˜åˆ°æœ¬åœ°ï¼\n\nç‚¹å‡»"ä¿å­˜åˆ°GitHub Gist"åˆ†äº«ã€‚');
            }
            
            // éšè—è¡¨å•
            document.getElementById('postForm').style.display = 'none';
        }
        
        // ============ æ•°æ®æ˜¾ç¤º ============
        function displayPosts() {
            const container = document.getElementById('postsDisplay');
            
            if (appData.posts.length === 0) {
                container.innerHTML = `
                    <div class="data-card" style="text-align:center;padding:40px;">
                        <i class="fas fa-inbox" style="font-size:3rem;color:#666;margin-bottom:20px;"></i>
                        <h3>è¿˜æ²¡æœ‰å¸–å­</h3>
                        <p style="color:#888;">å‘å¸ƒç¬¬ä¸€ä¸ªå¸–å­å§ï¼</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = appData.posts.map(post => `
                <div class="data-card">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                        <div style="font-weight:bold;color:#3b8526;">${post.author}</div>
                        <div style="background:${post.platform==='java'?'#e74c3c20':'#3498db20'};color:${post.platform==='java'?'#e74c3c':'#3498db'};padding:3px 10px;border-radius:15px;font-size:0.9rem;">
                            ${post.platform === 'java' ? 'Javaç‰ˆ' : 'åŸºå²©ç‰ˆ'}
                        </div>
                    </div>
                    <h3 style="margin-bottom:10px;">${post.title}</h3>
                    <p style="color:#ccc;line-height:1.5;">${post.content}</p>
                    <div style="margin-top:15px;color:#888;font-size:0.9rem;">
                        ${formatDate(post.created_at)}
                    </div>
                </div>
            `).join('');
        }
        
        function displayServers() {
            const container = document.getElementById('serversDisplay');
            
            if (appData.servers.length === 0) {
                container.innerHTML = `
                    <div class="data-card" style="text-align:center;padding:40px;">
                        <i class="fas fa-server" style="font-size:3rem;color:#666;margin-bottom:20px;"></i>
                        <h3>è¿˜æ²¡æœ‰æœåŠ¡å™¨</h3>
                        <p style="color:#888;">æ·»åŠ ç¬¬ä¸€ä¸ªæœåŠ¡å™¨å§ï¼</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = appData.servers.map(server => `
                <div class="data-card">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                        <h3 style="margin:0;">${server.name}</h3>
                        <div style="background:${server.platform==='java'?'#e74c3c20':'#3498db20'};color:${server.platform==='java'?'#e74c3c':'#3498db'};padding:3px 10px;border-radius:15px;font-size:0.9rem;">
                            ${server.platform === 'java' ? 'Javaç‰ˆ' : 'åŸºå²©ç‰ˆ'}
                        </div>
                    </div>
                    
                    <div style="background:rgba(0,0,0,0.3);padding:10px;border-radius:8px;margin:10px 0;font-family:monospace;">
                        ${server.ip}
                    </div>
                    
                    <p style="color:#ccc;line-height:1.5;">${server.description}</p>
                    
                    <div style="margin-top:15px;display:flex;justify-content:space-between;align-items:center;">
                        <span style="color:#888;font-size:0.9rem;">${server.author}</span>
                        <button class="btn" onclick="copyIP('${server.ip}')" style="width:auto;padding:8px 15px;font-size:0.9rem;">
                            å¤åˆ¶IP
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // ============ å·¥å…·å‡½æ•° ============
        function updateConnectionStatus() {
            const statusEl = document.getElementById('connectionStatus');
            if (githubToken) {
                statusEl.innerHTML = '<i class="fas fa-check-circle"></i><span>GitHubå·²é…ç½®ï¼Œå¯ä»¥è¯»å†™</span>';
                statusEl.className = 'status success';
            } else {
                statusEl.innerHTML = '<i class="fas fa-exclamation-triangle"></i><span>éœ€è¦GitHub Tokenæ‰èƒ½ä¿å­˜</span>';
                statusEl.className = 'status warning';
            }
        }
        
        function formatDate(dateStr) {
            try {
                const date = new Date(dateStr);
                const now = new Date();
                const diff = now - date;
                
                if (diff < 60000) return 'åˆšåˆš';
                if (diff < 3600000) return Math.floor(diff / 60000) + 'åˆ†é’Ÿå‰';
                if (diff < 86400000) return Math.floor(diff / 3600000) + 'å°æ—¶å‰';
                
                return date.toLocaleDateString('zh-CN') + ' ' + date.toLocaleTimeString('zh-CN', {hour: '2-digit', minute:'2-digit'});
            } catch (e) {
                return 'æœªçŸ¥æ—¶é—´';
            }
        }
        
        function copyIP(ip) {
            navigator.clipboard.writeText(ip).then(() => {
                alert('âœ… IPå·²å¤åˆ¶åˆ°å‰ªè´´æ¿:\n' + ip);
            });
        }
        
        // ============ é¡µé¢æ§åˆ¶ ============
        function showPostForm() {
            document.getElementById('postForm').style.display = 'block';
            document.getElementById('githubConfig').style.display = 'none';
        }
        
        function showGitHubConfig() {
            document.getElementById('postForm').style.display = 'none';
            document.getElementById('githubConfig').style.display = 'block';
        }
        
        function viewGistPage() {
            window.open(`https://gist.github.com/${GIST_ID}`, '_blank');
        }
        
        function saveGitHubConfig() {
            const token = document.getElementById('githubToken').value.trim();
            
            if (token) {
                githubToken = token;
                localStorage.setItem('github_token', token);
                updateConnectionStatus();
                alert('âœ… GitHubé…ç½®å·²ä¿å­˜ï¼');
            } else {
                alert('è¯·å…ˆè¾“å…¥GitHub Token');
            }
        }
        
        // ============ åˆå§‹åŒ– ============
        window.onload = function() {
            initApp();
        };
    </script>
</body>
</html>